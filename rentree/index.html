<html>
	<head>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		
		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="jquery.elevateZoom.min.js"></script>
		<script src="papaparse.min.js" type="text/javascript"></script>
		<script src="taffy.js"></script>
		<script src="json_db.js"></script>
		<script type="text/javascript">
			
			$(document).ready(function(){
				$('#search').on('input',function(){
					$('#results li').remove();
					if($(this).val().length < 3) return;
					console.log($(this).val());

					var res = assos([
							{'nom':{like:$(this).val()}},
							{'sigle':{like:$(this).val()}},
							{'clairecie':{like:$(this).val()}},
							{'objet':{like:$(this).val()}},
							{'clairrub1':{like:$(this).val()}}
						]);
					
					res.each(function(r){
						$('<li><a>').text(r.sigle + ' - ' + r.nom)
							.css('cursor', 'pointer')
							.appendTo('#results')
							.on('click',function(){
								console.log('data');
								$('#asso-modal')
									.modal('show')
									.on('show.bs.modal', function (e) {
										console.log(r);
										$(this).find('h4.modal-title').html(r.nom);
										content = r.objet;
										content += '<img class="img-responsive" data-zoom-image="plan/' + r.noplan + '.jpg" src="plan/' + r.noplan + '.jpg">';
										$(this).find('.modal-body').html(content);
                    $(".img-responsive").elevateZoom({tint:true, tintColour:'#F90', tintOpacity:0.5});
									});

							});
					});
					console.log(res.count());
				});



			});


		</script>
	</head>
	<body>

		<div class="container">
			<div class="col-md-4 center-block">
				<form>
					<div class="form-group">
		    			<label for="search">Search</label>
		    			<input type="search" class="form-control" id="search" placeholder="search">
		  			</div>
				</form>
				<ul id="results" class="clear"></ul>
			</div>
		</div>
		


		<div class="modal fade bs-example-modal-lg" id="asso-modal" tabindex="-1" role="dialog" aria-labelledby="asso-modal">
			<div class="modal-dialog" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			        <h4 class="modal-title" id="exampleModalLabel"></h4>
			      </div>
			      <div class="modal-body">
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
			      </div>
			    </div>
			 </div>
		</div>


	</body>
				
</html>